<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Document</title>
    </head>

    <body>
        <h1>Usuários cadastrados</h1>
        <main>
        </main>
    
        <script>

            /*
                Consumindo api no front, a função fetch carrega o arquivo
                para uma promisse feito com uma função async await
            */

            async function getContent () {    
                try {
                    const response = await fetch('http://localhost:3003/')
                    const data = await response.json()
                    showUsers(data)
                } catch (error) {
                    console.error(error)
                }
            }

            getContent()

            // Função que transforma os dados em elemento html para o front
            function showUsers (users) {
                let output = ''

                try {
                
                users.forEach((user) => {
                    output += `<li>${user.name}</li>`
                })

                document.querySelector('main').innerHTML = output
    
                } catch (error) {
                    console.log(error)
                }
            }
        </script>
    </body>

</html>